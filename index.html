<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Visiting all the Vermeers">
    <meta name="author" content="Jessica Lor">
    <title>Vermeer Goals</title>
    <!-- <link rel="icon" type="image/png" href="favicon.png"> -->
    <!-- <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'> -->    <link rel="stylesheet" href="assets/style.css">
    <script src="assets/data.json"></script>
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/sheetsee.js"></script>
  </head>
  <body>
    <header>
      <div class="wrapper">
        <h1><a href="index.html">Vermeer Goals</a></h1>
        <nav>
          <ul class="no-style">
            <li><a href="about.html">About</a></li>
            <li><a href="visits.html">Visits</a></li>
            <li><a href="stats.html">Stats</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <section>
        <div class="wrapper">
          <div class="some"></div>
        </div>
      </section>

      <div class="wrapper">
        <div id="paintings">
          <p>Loading the Vermeers...</p>
        </div>
      </div>
    </main>

    <footer>
      <div class="wrapper">
        <nav>
          <h4 class="float-left inline-block"><a href="index.html">Vermeer Goals</a></h4>
          <ul class="no-style">
            <li><a href="about.html">About</a></li>
            <li><a href="visits.html">Visits</a></li>
            <li><a href="stats.html">Stats</a></li>
          </ul>
        </nav>
      </div>
    </footer>

  </body>

  <script id="paintings_template" type="text/html">
    {{#rows}}
    <div class="painting-container">
      <div class="painting-img most f-right">
        <img src="assets/imgs/{{Photo}}">
      </div>

      <div class="painting-info some">
        <h3>{{ Location }} <span class="no-bold force-wrap">{{ City }}</span></h3>
        <div class="painting-details">
          <p class="painting-names">{{ Paintings }}</p>
          <div class="painting-meta">
            // TODO Add back notes to spreadsheet
            <p><b>Visit—</b>{{Date}} <a href="visits.html#">Details</a></p>
            {{#Notes}}
            <p><span class="painting-meta"><b>Notes—</b>{{Notes}}</p>
            {{/Notes}}
          </div>
        </div>
      </div>
    </div>
    {{/rows}}
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var html = Sheetsee.ich.paintings_template({'rows': sortData(vermeers)})
      $('#paintings').html(html)

      function sortData (data) {
        // TODO This will fail if I
        // visit two places in one day
        var visits = []
        var visitedDates = []
         vermeers.forEach(function (visit) {
          if (visit.Seen === "Y" && visitedDates.indexOf(visit.Date) === -1) {
            visits.push(visit)
            visitedDates.push(visit.Date)
          }
        })
        return visits
      }
    })
  </script>
</html>
